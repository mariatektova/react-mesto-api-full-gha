{"ast":null,"code":"import _toConsumableArray from\"/Users/mariatektova/Documents/\\u0432\\u0435\\u0440\\u0441\\u0442\\u043A\\u0430/mesto-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/mariatektova/Documents/\\u0432\\u0435\\u0440\\u0441\\u0442\\u043A\\u0430/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import Header from\"./Header\";import Main from\"./Main\";import Footer from\"./Footer\";import PopupWithForm from\"./PopupWithForm\";import ImagePopup from\"./ImagePopup\";import{api}from\"../utils/api\";import CurrentUserContext from\"../contexts/CurrentUserContext\";import EditProfilePopup from\"./EditPriofliePopup\";import EditAvatarPopup from\"./EditAvatarPopup\";import AddPlacePopup from\"./AddPlacePopup\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isEditProfilePopupOpen=_useState2[0],setIsEditProfilePopupOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isEditAvatarPopupOpen=_useState4[0],setIsEditAvatarPopupOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isAddPlacePopupOpen=_useState6[0],setIsAddPlacePopupOpen=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),selectedCard=_useState8[0],setSelectedCard=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),currentUser=_useState10[0],setCurrentUser=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),cards=_useState12[0],setCards=_useState12[1];useEffect(function(){api.getInfo().then(function(profileInfo){setCurrentUser(profileInfo);});api.getCards().then(function(dataCard){setCards(dataCard.map(function(data){return{_id:data._id,name:data.name,link:data.link,likes:data.likes,owner:data.owner};}));});},[]);function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});api.changeLikeCardStatus(card._id,!isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});}).catch(function(err){console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(err));});}function handleDeleteClick(card){api.deleteCards(card._id).then(function(){setCards(function(state){return state.filter(function(item){return item._id!=card._id;});});}).catch(function(err){console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(err));});}function handleUpdateUser(updatedInfo){api.setInfo(updatedInfo).then(function(data){setCurrentUser(data);closePopups();}).catch(function(err){console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(err));});}function handleUpdateAvatar(updateAvatar){api.changeAvatar(updateAvatar).then(function(data){setCurrentUser(data);closePopups();}).catch(function(err){console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(err));});}function handleAddPlaceSubmit(data){api.postCard(data).then(function(createCard){setCards([createCard].concat(_toConsumableArray(cards)));closePopups();}).catch(function(err){console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(err));});}function handleEditProfileOpenClick(){setIsEditProfilePopupOpen(true);}function handleEditAvatar(){setIsEditAvatarPopupOpen(true);}function handleAddPlace(){setIsAddPlacePopupOpen(true);}function handleCardClick(data){setSelectedCard(data);}function closePopups(){setIsEditProfilePopupOpen(false);setIsEditAvatarPopupOpen(false);setIsAddPlacePopupOpen(false);setSelectedCard(false);}return/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{onEditProfile:handleEditProfileOpenClick,onEditAvatar:handleEditAvatar,onAddPlace:handleAddPlace,onCardClick:handleCardClick,onCardLike:handleCardLike,onCardDelete:handleDeleteClick,cards:cards}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(ImagePopup,{}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closePopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closePopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closePopups,onAddPLace:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(ImagePopup,{card:selectedCard,onClose:closePopups,isOpen:selectedCard})]})});}export default App;","map":{"version":3,"names":["useState","useEffect","Header","Main","Footer","PopupWithForm","ImagePopup","api","CurrentUserContext","EditProfilePopup","EditAvatarPopup","AddPlacePopup","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","selectedCard","setSelectedCard","currentUser","setCurrentUser","cards","setCards","getInfo","then","profileInfo","getCards","dataCard","map","data","_id","name","link","likes","owner","handleCardLike","card","isLiked","some","i","changeLikeCardStatus","newCard","state","c","catch","err","console","log","handleDeleteClick","deleteCards","filter","item","handleUpdateUser","updatedInfo","setInfo","closePopups","handleUpdateAvatar","updateAvatar","changeAvatar","handleAddPlaceSubmit","postCard","createCard","handleEditProfileOpenClick","handleEditAvatar","handleAddPlace","handleCardClick"],"sources":["/Users/mariatektova/Documents/верстка/mesto-react/src/components/App.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport ImagePopup from \"./ImagePopup\";\nimport { api } from \"../utils/api\";\nimport CurrentUserContext from \"../contexts/CurrentUserContext\";\nimport EditProfilePopup from \"./EditPriofliePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [currentUser, setCurrentUser] = useState(\"\");\n  const [cards, setCards] = useState([]);\n\n  useEffect(() => {\n    api.getInfo().then((profileInfo) => {\n      setCurrentUser(profileInfo);\n    });\n    api.getCards().then((dataCard) => {\n      setCards(\n        dataCard.map((data) => ({\n          _id: data._id,\n          name: data.name,\n          link: data.link,\n          likes: data.likes,\n          owner: data.owner,\n        }))\n      );\n    });\n  }, []);\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n    api\n      .changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        setCards((state) =>\n          state.map((c) => (c._id === card._id ? newCard : c))\n        );\n      })\n      .catch((err) => {\n        console.log(`Ошибка: ${err}`);\n      });\n  }\n  function handleDeleteClick(card) {\n    api\n      .deleteCards(card._id)\n      .then(() => {\n        setCards((state) => state.filter((item) => item._id != card._id));\n      })\n      .catch((err) => {\n        console.log(`Ошибка: ${err}`);\n      });\n  }\n\n  function handleUpdateUser(updatedInfo) {\n    api\n      .setInfo(updatedInfo)\n      .then((data) => {\n        setCurrentUser(data);\n        closePopups();\n      })\n      .catch((err) => {\n        console.log(`Ошибка: ${err}`);\n      });\n  }\n  function handleUpdateAvatar(updateAvatar) {\n    api\n      .changeAvatar(updateAvatar)\n      .then((data) => {\n        setCurrentUser(data);\n        closePopups();\n      })\n      .catch((err) => {\n        console.log(`Ошибка: ${err}`);\n      });\n  }\n  function handleAddPlaceSubmit(data) {\n    api\n      .postCard(data)\n      .then((createCard) => {\n        setCards([createCard, ...cards]);\n        closePopups();\n      })\n      .catch((err) => {\n        console.log(`Ошибка: ${err}`);\n      });\n  }\n  function handleEditProfileOpenClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n  function handleEditAvatar() {\n    setIsEditAvatarPopupOpen(true);\n  }\n  function handleAddPlace() {\n    setIsAddPlacePopupOpen(true);\n  }\n  function handleCardClick(data) {\n    setSelectedCard(data);\n  }\n\n  function closePopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setSelectedCard(false);\n  }\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Header />\n        <Main\n          onEditProfile={handleEditProfileOpenClick}\n          onEditAvatar={handleEditAvatar}\n          onAddPlace={handleAddPlace}\n          onCardClick={handleCardClick}\n          onCardLike={handleCardLike}\n          onCardDelete={handleDeleteClick}\n          cards={cards}\n        />\n        <Footer />\n        <ImagePopup />\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closePopups}\n          onUpdateUser={handleUpdateUser}\n        />\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closePopups}\n          onUpdateAvatar={handleUpdateAvatar}\n        />\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closePopups}\n          onAddPLace={handleAddPlaceSubmit}\n        />\n        <ImagePopup\n          card={selectedCard}\n          onClose={closePopups}\n          isOpen={selectedCard}\n        />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}